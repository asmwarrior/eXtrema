<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>BIN2D command</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<OBJECT TYPE="application/x-oleobject" CLASSID="clsid:1e2a7bd0-dab9-11d0-b93a-00c04fc99f9e">
  <PARAM NAME="Keyword" VALUE="BIN2D command">
  <PARAM NAME="Keyword" VALUE="2 dimensional binning">
  <PARAM NAME="Keyword" VALUE="two dimensional binning">
</OBJECT>

<P><font size=+3 color="green"><B>BIN2D command</B></font></P>

<TABLE border="1" cols="2" frame="box" rules="all" width="650">
<TR>
<TD width=15% valign="top"><B>Syntax</B>:</TD>
<TD width=85% valign="top"><CODE>
BIN2D x y xbin ybin mcounts nx ny { xmin xmax ymin ymax }<br>
BIN2D\MATRIX mdata mxin myin mout</CODE>
</TD></TR>
<TR>
<TD width=15% valign="top"><B>Qualifiers</B>:</TD>
<TD width=85% valign="top"><CODE>
<nobr>\WEIGHTS,</nobr> <nobr>\EMPTY,</nobr> <nobr>\MATRIX,</nobr>
<nobr>\XDISCARD,</nobr> <nobr>\YDISCARD</nobr></CODE>
</TD></TR>
<TR>
<TD width=15% valign="top"><B>Defaults</B>:</TD>
<TD width=85% valign="top"><CODE>
<nobr>\-WEIGHTS,</nobr> <nobr>\-EMPTY,</nobr> <nobr>\-MATRIX,</nobr>
<nobr>\-XDISCARD,</nobr> <nobr>\-YDISCARD,</nobr> <nobr>xmin = min(x),</nobr>
<nobr>xmax = max(x)</nobr> <nobr>ymin = min(y),</nobr>
<nobr>ymax = max(y)</nobr></CODE>
</TD></TR>
</TABLE>
<P>
 The <CODE><font color="blue">BIN2D</font></CODE> command forms a matrix of bins of data by sorting the
 vectors <CODE><font color="blue">x</font></CODE> and <CODE><font color="blue">y</font></CODE> into
 grids of bins which are returned in vectors <CODE><font color="blue">xbin</font></CODE> and
 <CODE><font color="blue">ybin</font></CODE>. The accumulated matrix of total counts
 per bin is returned in matrix <CODE><font color="blue">mcounts</font></CODE>. If the numbers
 <CODE><font color="blue">xmin</font></CODE> and <CODE><font color="blue">xmax</font></CODE> are not
 entered, they default to the minimum and maximum of <CODE><font color="blue">x</font></CODE>.
 Similarly, if the numbers <CODE><font color="blue">ymin</font></CODE> and
 <CODE><font color="blue">ymax</font></CODE> are not entered, they default to the minimum and maximum
 of <CODE><font color="blue">y</font></CODE>.</p>
<p>
<center>
 <nobr><CODE><font color="blue">xbin</font><sub>i</sub> =
 <font color="blue">xmin</font>+(i-1/2)(<font color="blue">xmax</font>-<font color="blue">xmin</font>)/<font color="blue">nx</font></CODE>&nbsp;&nbsp; for&nbsp;&nbsp; <code>i=1,2,...,<font color="blue">nx</font></code></nobr></center></p>
<p>
<center>
 <nobr><CODE><font color="blue">ybin</font><sub>j</sub> =
 <font color="blue">ymin</font>+(j-1/2)(<font color="blue">ymax</font>-<font color="blue">ymin</font>)/<font color="blue">ny</font></CODE>&nbsp;&nbsp; for&nbsp;&nbsp; <code>j=1,2,...,<font color="blue">ny</font></code></nobr></center></p>
<p>
 The point <code>(<font color="blue">x</font><sub>k</sub>,<font color="blue">y</font><sub>k</sub>)</code> will be accumulated in
 <code><font color="blue">mcounts</font><sub>i,j</sub></code>,
 where</p>
<p>
 <table>
 <tr><td align="right">row:</td>
     <td><code>i = int((<font color="blue">y</font><sub>k</sub>-<font color="blue">ymin</font>)/(<font color="blue">ymax</font>-<font color="blue">ymin</font>)*<font color="blue">ny</font>)+1</code></td></tr>
 <tr><td align="right">column:</td>
     <td><code>j = int((<font color="blue">x</font><sub>k</sub>-<font color="blue">xmin</font>)/(<font color="blue">xmax</font>-<font color="blue">xmin</font>)*<font color="blue">nx</font>)+1</code></td></tr></table></p>
<p><font size=+1 color="green"><B>Dimensions</B></font></P>
<p>
 The lengths of <CODE><font color="blue">x</font></CODE> and <CODE><font color="blue">y</font></CODE>
 must be equal. If a weight vector, <CODE><font color="blue">w</font></CODE>, is supplied, it must also
 be the same length.</p>
<p>
 The vectors <CODE><font color="blue">xbin</font></CODE> and <CODE><font color="blue">ybin</font></CODE> and the matrix <CODE><font color="blue">mcounts</font></CODE> will be
 created. <CODE><font color="blue">xbin</font></CODE> will have <code><font color="blue">nx</font></CODE> elements, <CODE><font color="blue">ybin</font></CODE> will have
 <CODE><font color="blue">ny</font></CODE> elements, and matrix
 <CODE><font color="blue">mcounts</font></CODE> will have
 <CODE><font color="blue">nx</font></CODE> columns and
 <CODE><font color="blue">ny</font></CODE> rows.</p>
<p><font size=+1 color="green"><B>Extremes</B></font></P>
<p>
 By default, events below <CODE><font color="blue">xmin</font></CODE> are placed in the first bin
 column, events above <CODE><font color="blue">xmax</font></CODE> are placed in the last bin column,
 events below <CODE><font color="blue">ymin</font></CODE> are placed in the first bin row, and events
 above <CODE><font color="blue">ymax</font></CODE> are placed in the last bin row. If the
 <CODE><font color="blue">\XDISCARD</font></CODE> qualifier is used, events below
 <CODE><font color="blue">xmin</font></CODE> are discarded, and events above
 <CODE><font color="blue">xmax</font></CODE> are discarded. If the
 <CODE><font color="blue">\YDISCARD</font></CODE> qualifier is used, events below
 <CODE><font color="blue">ymin</font></CODE> are discarded, and events above
 <CODE><font color="blue">ymax</font></CODE> are discarded.</p>
<p><font size=+1 color="green"><B>Weights</B></font></P>
<TABLE border="1" cols="2" frame="box" rules="all" width="650">
<TR>
<TD width=15% valign="top"><B>Syntax</B>:</TD>
<TD width=85% valign="top"><CODE>
BIN2D\WEIGHTS w x y xbin ybin mcounts nx ny { xmin xmax ymin ymax }</CODE>
</TD></TR>
</TABLE>
<p>
 If a vector of weights is entered, you must indicate that it is there by using the
 <CODE><font color="blue">\WEIGHTS</font></CODE> qualifier. The weight
 <CODE><font color="blue">w</font></CODE> must be a vector. The
 <code>i</code><sup>th</sup> event causes the bin count to be incremented by
 <CODE><font color="blue">w</font><sub>i</sub></CODE>.</p>
<p><font size=+1 color="green"><B>Increment only if empty</B></font></P>
<TABLE border="1" cols="2" frame="box" rules="all" width="650">
<TR>
<TD width=15% valign="top"><B>Syntax</B>:</TD>
<TD width=85% valign="top"><CODE>
BIN2D\EMPTY w x y xbin ybin mcounts nx ny { xmin xmax ymin ymax }</CODE>
</TD></TR>
</TABLE>
<p>
 If the <CODE><font color="blue">\EMPTY</font></CODE> qualifier is used, an event is counted in a
 bin only if that bin is empty. Only the first event encountered for each bin will be counted in
 that bin. <CODE><font color="blue">\EMPTY</font></CODE> cannot be used with
 <CODE><font color="blue">\MATRIX</font></CODE>.</p>
<p><font size=+1 color="green"><B>Defined by box corners</B></font></P>
<TABLE border="1" cols="2" frame="box" rules="all" width="650">
<TR>
<TD width=15% valign="top"><B>Syntax</B>:</TD>
<TD width=85% valign="top"><CODE>
BIN2D\MATRIX mdata mx my mcounts</CODE>
</TD></TR>
</TABLE>
<p>
 The <CODE><font color="blue">BIN2D\MATRIX</font></CODE> command calculates the sum of the data
 points given by matrix <CODE><font color="blue">mdata</font></CODE> within a set of boxes. The
 <i>x</i>-coordinates of the boxes are given in matrix <CODE><font color="blue">mx</font></CODE>,
 the <i>y</i>-coordinates are given in matrix <CODE><font color="blue">my</font></CODE>. Matrices
 <CODE><font color="blue">mx</font></CODE> and <CODE><font color="blue">my</font></CODE> must be the
 same size. A data point is taken to be inside a box if it is interior or on an edge. Each data point
 is considered only once, so a data point is never taken to be in more than one of the boxes. The
 coordinates of the data points are the row and column indices, for example,
 <CODE><font color="blue">mdata</font>[3,4]</CODE> is row 3 and column 4 so it is at
 <code>(<i>x</i>,<i>y</i>)</code> location <code>(4,3)</code>. The <i>x</i> and <i>y</i>-coordinates in
 <CODE><font color="blue">mx</font></CODE> and <CODE><font color="blue">my</font></CODE> should be in
 this index space of coordinates. The qualifiers <CODE><font color="blue">\EMPTY</font></CODE> and
 <CODE><font color="blue">\WEIGHTS</font></CODE> cannot be used with
 <CODE><font color="blue">\MATRIX</font></CODE>.</p>
</BODY>
</HTML>
