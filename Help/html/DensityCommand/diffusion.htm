<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Diffusion</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<OBJECT TYPE="application/x-oleobject"
        CLASSID="clsid:1e2a7bd0-dab9-11d0-b93a-00c04fc99f9e">
	<PARAM NAME="Keyword" VALUE="Diffusion">
</OBJECT>

<P><A NAME="densitycommanddiffusion"></A>
<font size=+3 color="green"><B>Diffusion</B></font></P>

<TABLE border=1 cols=2 frame=box rules=all width=572>
<TR>
<TD width=15% valign="top"><B>Syntax</B>:</TD>
<TD width=85% valign="top"><CODE>
DENSITY\DIFFUSION { x y } z { p1 p2 }</CODE>
</TD></TR>
<TR>
<TD width=15% valign="top"><B>Qualifiers</B>:</TD>
<TD width=85% valign="top"><CODE>
<nobr>\PARTIAL,</NOBR> <NOBR>\XPROFILE,</NOBR> <NOBR>\YPROFILE,</NOBR>
<NOBR>\BORDER,</NOBR> <NOBR>\AXES,</NOBR> <nobr>\RESET</nobr></CODE>
</TD></TR>
<TR>
<TD width=15% valign="top"><B>Defaults</B>:</TD>
<TD width=85% valign="top"><CODE>
<nobr>if <CODE>z</CODE> is a matrix:
<CODE>x=[1;2;3;...], y=[1;2;3;...],</CODE></NOBR>
<nobr><CODE>p1=0, p2=1,</CODE></nobr>
<nobr>\-PARTIAL,</nobr> <nobr>\-XPROFILE,</nobr>
<nobr>\-YPROFILE,</nobr> <nobr>\BORDER,</nobr> <nobr>\AXES,</nobr>
<nobr>\RESET</NOBR></CODE>
</TD></TR>
</TABLE>
<P>
 Diffusion is a form of digital halftoning.  A threshold is fixed at
 &frac12;. Data values are interpolated at each pixel location, and then
 normalized to be between <CODE>0</CODE> (white) and <CODE>1</CODE> (black). The
 resulting binary output value is compared with the original grey level value. The
 difference is called the error for that location. The signal consisting of past error
 values is passed through an error filter to produce a correction factor to be added to
 future input values. Thus, errors are diffused over a weighted neighborhood.</p>
<P>
<font size=+1 color="green">Input variables</font></P>
<P>
 If <CODE><font color="blue">z</font></CODE> is a vector, the parameters
 <CODE><font color="blue">x</font></CODE> and <CODE><font color="blue">y</font></CODE>
 are expected and must be vectors. <CODE><font color="blue">x</font></CODE> and
 <CODE><font color="blue">y</font></CODE> are assumed to represent a scattered set
 of points, where <CODE><font color="blue">z</font>[i]</CODE> is the altitude
 corresponding to the location
 <CODE>(<font color="blue">x</font>[i],<font color="blue">y</font>[i])</CODE>.
 A matrix is interpolated on these scattered points by means of a Thiessen
 triangulation of the plane. The three vectors must be the same length.</p>
<p>
 If <CODE><font color="blue">z</font></CODE> is a matrix, the parameters
 <CODE><font color="blue">x</font></CODE> and
 <CODE><font color="blue">y</font></CODE> default to
 <CODE>[1;2;3;...]</CODE>, but if entered they must be vectors. Each matrix element,
 <CODE><font color="blue">z</font>[i,j]</CODE>, is associated with the coordinates
 <CODE>(<font color="blue">x</font>[j],<font color="blue">y</font>[i])</CODE>.  The
 length of <CODE><font color="blue">x</font></CODE> must be equal to
 the number of columns of <CODE><font color="blue">z</font></CODE> and the length of
 <CODE><font color="blue">y</font></CODE> must be equal to the number
 of rows. The vectors <CODE><font color="blue">x</font></CODE> and
 <CODE><font color="blue">y</font></CODE> are used for scaling the axes.</p>
<p>
 <font size=+1 color="green">Changing the range of values</font></p>
<p>
 The optional parameters <CODE><font color="blue">p1</font></CODE> and
 <CODE><font color="blue">p2</font></CODE> can be used to broaden or shrink
 the range of data values. If <CODE>z<sub>max</sub></CODE>
 is the maximum value of the data and
 <CODE>z<sub>min</sub></CODE> is the minimum value of the
 data, the full colour range will be from a minimum of 
 <nobr><CODE>min = <font color="blue">p1</font>&middot;(z<sub>max</sub>-z<sub>min</sub>)+z<sub>min</sub></CODE></nobr>
 to a maximum of 
 <nobr><CODE>max = <font color="blue">p2</font>&middot;(z<sub>max</sub>-z<sub>min</sub>)+z<sub>min</sub></CODE></nobr>.
 If <CODE>z</CODE> is a data value and if
 <nobr><CODE>z &lt; <font color="blue">p1</font>&middot;(z<sub>max</sub>-z<sub>min</sub>)+z<sub>min</sub></CODE></nobr>,
 that data value is treated as <CODE>z<sub>min</sub></CODE></nobr>.
 If <CODE>z &gt; <font color="blue">p1</font>&middot;(z<sub>max</sub>-z<sub>min</sub>)+z<sub>min</sub></CODE></nobr>,
 that data value is treated as <CODE>z<sub>max</sub></CODE>.
 The default values are: <CODE><font color="blue">p1</font>=0</CODE> and
 <CODE><font color="blue">p2</font>=1</CODE>.</p>
<p>
<font size=+1 color="green">Example</font></P>
<p>
 These examples use the following vectors.</p>
<pre>
 X=[  1;  0;  1;  0;   .2; .3;   .5;  .8]
 Y=[  5;  5;  0;  0;    1;1.5;  2.5;   4]
 Z=[ 10; 10; 10; 10; -100; 10; -100; 500]
</PRE>
<table>
<tr>
<td><CODE>DENSITY\DIFFUSION X Y Z</CODE></td>
<td><img src="diffusion1.png"></td>
</tr><tr>
<td><CODE>DENSITY\DIFF\XPRO\YPRO X Y Z</CODE></td>
<td><img src="diffusion2.png"></td>
</tr></table>
<p>
<a href="dithering.htm"><img align=middle border=0 src="..\shadow_left.gif">&nbsp;<font size=+1 color="olive">DITHERING</font></a><br>
<a href="boxes.htm"><img align=middle border=0 src="..\shadow_right.gif">&nbsp;<font size=+1 color="olive">BOXES</font></a>
</P>
</BODY>
</HTML>
